<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Hycçš„è¸©å‘ä¹‹æ—… RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Hycçš„è¸©å‘ä¹‹æ—… Atom Feed"><title data-react-helmet="true">hadoop | Hycçš„è¸©å‘ä¹‹æ—…</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hyc3z.github.io/docs/big-data/hadoop"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="hadoop | Hycçš„è¸©å‘ä¹‹æ—…"><meta data-react-helmet="true" name="description" content="Hadoop"><meta data-react-helmet="true" property="og:description" content="Hadoop"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hyc3z.github.io/docs/big-data/hadoop"><link data-react-helmet="true" rel="alternate" href="https://hyc3z.github.io/docs/big-data/hadoop" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hyc3z.github.io/docs/big-data/hadoop" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.366311be.css">
<link rel="preload" href="/assets/js/runtime~main.8c487385.js" as="script">
<link rel="preload" href="/assets/js/main.036a9873.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Hyc3z</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ğŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ğŸŒ</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/ai/deep_learning">ai</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/big-data/hadoop">big-data</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/big-data/hadoop">hadoop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/big-data/kafka">kafka</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/blockchain/Chainlink">blockchain</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/cpp/pcal">cpp</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/cryptography/overview">cryptography</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/database/Oracle">database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/design/microservices">design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/docs/git/">git</a><button aria-label="Toggle the collapsible sidebar category &#x27;git&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/graph/graph-database">graph</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/python/re">python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/ts/typescript">ts</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>hadoop</h1></header><h3 class="anchor anchorWithStickyNavbar_mojV" id="hadoop">Hadoop<a class="hash-link" href="#hadoop" title="Direct link to heading">â€‹</a></h3><p><img alt="MapReduce logical data flow" src="/assets/images/hddg_0201-565ba1dd61ad20c95ff4303ba0bb72c2.png" width="1000" height="192"></p><p>æ•°æ®å¤„ç†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šMapå’ŒReduce</p><p>Mapé˜¶æ®µä¼šå¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ï¼Œè¿‡æ»¤ä»¥åŠè§£æã€‚</p><p>ç„¶åç»è¿‡mapreduceè¿›è¡ŒåŠ å·¥ï¼Œå†ä¼ ç»™reduce function</p><p>æœ€åå¾—åˆ°ç»“æœ</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="mapreduce-job">MapReduce Job<a class="hash-link" href="#mapreduce-job" title="Direct link to heading">â€‹</a></h4><p>ä¸€ä¸ªJob åŒ…å«è¾“å…¥æ•°æ®ï¼Œé…ç½®ï¼Œä»¥åŠMapReduce Program</p><p>Hadoopè´Ÿè´£æŠŠjobæ‹†åˆ†æˆä¸€ç³»åˆ—Tasksï¼Œè¿™äº›taskåªæœ‰ä¸¤ç§ç±»å‹ï¼šMapå’ŒReduce</p><p>è¿™äº›taskè¢«YARNè°ƒåº¦ï¼Œåœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å¦‚æœTaskå¤±è´¥äº†ï¼Œå®ƒä¼šè‡ªåŠ¨è¢«å®‰æ’åœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œã€‚</p><p>ï¼ˆæ³¨ï¼šè¿™ä¸ªYarnå’Œnodejsçš„yarnå®¹æ˜“å‘ç”Ÿå‘½ä»¤è¡Œå†²çªï¼Œå› æ­¤ä¹Ÿå¯ä»¥ç”¨yarnpkgæ¥è°ƒç”¨ï¼‰</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="splits">Splits<a class="hash-link" href="#splits" title="Direct link to heading">â€‹</a></h5><p>Hadoopä¼šæŠŠæ•°æ®çºµå‘æ‹†å¼€ï¼Œåˆ†ç»™ä¸åŒçš„taskå»åšmapï¼Œè¿™æ ·å¯ä»¥æå‡æ•ˆç‡ã€‚</p><p>å¯¹å¤§å¤šæ•°Jobæ¥è¯´ï¼ŒSplit sizeå°±æ˜¯HDFS Blockçš„å¤§å°ï¼Œ128MB</p><p>å¦‚æœå¤§äº128MBï¼Œå°±æœ‰å¯èƒ½ä¼šå‡ºç°ç»“æœå­˜åœ¨å¤šä¸ªBlockä¸­ï¼Œå¯èƒ½ä¼šå­˜åœ¨å¤šä¸ªèŠ‚ç‚¹é‡Œï¼Œå‡ºç°ç½‘ç»œè¯·æ±‚ã€‚</p><p>Map Taskçš„ç»“æœæ˜¯å†™åœ¨æœ¬åœ°ç£ç›˜ï¼Œä¸æ˜¯å†™åœ¨HDFSé‡Œçš„ï¼Œå› ä¸ºå®ƒå±äºä¸­é—´ç»“æœ</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="data-flow">Data Flow<a class="hash-link" href="#data-flow" title="Direct link to heading">â€‹</a></h5><p><img alt="MapReduce data flow with a single reduce task" src="/assets/images/hddg_0203-6dd0644d38d83417bc59a7ea255a0740.png" width="1000" height="538"></p><p>è™šçº¿ä»£è¡¨æœ¬åœ°æ•°æ®æµï¼Œå®çº¿ä»£è¡¨è·¨Nodeæ•°æ®æµã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="multiple-tasksshuffle">Multiple Tasks(shuffle)<a class="hash-link" href="#multiple-tasksshuffle" title="Direct link to heading">â€‹</a></h5><p><img alt="MapReduce data flow with multiple reduce tasks" src="/assets/images/hddg_0204-b106253fc8c15aca49c21bd56355a8b4.png" width="1000" height="538"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="combiner-function">Combiner function<a class="hash-link" href="#combiner-function" title="Direct link to heading">â€‹</a></h5><p>é™¤äº†Mapperå’ŒReducerï¼Œè¿˜å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©Combiner æ¥å‡å°‘æ•°æ®çš„äº¤æ¢ã€‚</p><p>æ¯”å¦‚æ±‚æœ€å¤§å€¼ï¼Œå°±å¯ä»¥ç”¨Combinerï¼Œåœ¨æ¯ä¸ªMapç»“æŸåç›´æ¥è°ƒç”¨ï¼Œæœ€åçš„ç»“æœä¸å˜ï¼Œä½†å‚ä¸ç½‘ç»œäº¤æ¢çš„æ•°æ®å¤§å¤§å‡å°‘äº†ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">max(0, 20, 10, 25, 15) = max(max(0, 20, 10), max(25, 15)) = max(20, 25) = 25</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å½“ç„¶ï¼Œä¸æ˜¯æ‰€æœ‰é—®é¢˜éƒ½èƒ½å¤Ÿç”¨å¾—åˆ°ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="hadoop-streaming">Hadoop Streaming<a class="hash-link" href="#hadoop-streaming" title="Direct link to heading">â€‹</a></h5><p>ç†è®ºä¸Šï¼Œåªè¦æ˜¯èƒ½å¤Ÿè¯»å–/å†™å…¥ Unixæ ‡å‡†IOçš„éƒ½èƒ½å¤Ÿä½¿ç”¨Hadoop Streamingï¼Œæ‰€ä»¥ä¸ä¸€å®šè¦ç”¨Javaã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="hadoop-distributed-filesystem-hdfs">Hadoop Distributed Filesystem (HDFS)<a class="hash-link" href="#hadoop-distributed-filesystem-hdfs" title="Direct link to heading">â€‹</a></h3><p>Hadoopå…¶å®ä¹Ÿå¯ä»¥å’Œå…¶ä»–æ–‡ä»¶ç³»ç»Ÿç»“åˆï¼Œæ¯”å¦‚Amazon S3æˆ–è€…æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>HDFSçš„<strong>ç‰¹ç‚¹</strong>ï¼š</p><p>æ”¯æŒè¶…å¤§æ–‡ä»¶ã€æ°‘ç”¨ç¡¬ä»¶ã€æµå¼æ–‡ä»¶å­˜å–</p><p>HDFSçš„<strong>ç¼ºç‚¹</strong>ï¼š</p><p>å»¶è¿Ÿï¼ˆæŒ–å‘ HBaseï¼‰ã€å¤§é‡å°æ–‡ä»¶</p><p>Append-onlyï¼Œä¸æ”¯æŒéšæœºå†™å…¥ï¼Œä¸æ”¯æŒMulti writer</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="blocks">Blocks<a class="hash-link" href="#blocks" title="Direct link to heading">â€‹</a></h5><p>HDFSçš„æ–‡ä»¶éƒ½è¢«ChunkæˆBlockè¿›è¡Œå­˜å‚¨ï¼Œæ¯ä¸ªBlock 128MBã€‚å½“ç„¶ï¼Œä¸åƒç£ç›˜çš„4K å—å¤§å°ï¼Œå°äº128Mçš„æ–‡ä»¶åœ¨HDFSé‡Œå¹¶ä¸ä¼šå æœ‰128MBï¼Œè€Œæ˜¯æ–‡ä»¶åŸæ¥çš„å¤§å°ã€‚</p><p>ä¹‹æ‰€ä»¥HDFSçš„å—é‚£ä¹ˆå¤§ï¼Œå°±æ˜¯ä¸ºäº†æœ€å°åŒ–seek timeï¼Œä¹Ÿå°±æ˜¯å¯»æ‰¾å—çš„æ—¶é—´ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="namenodes-and-datanodes">Namenodes and Datanodes<a class="hash-link" href="#namenodes-and-datanodes" title="Direct link to heading">â€‹</a></h5><p>Namenode: master</p><p>è´Ÿè´£ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„namespaceï¼Œfilesystem treeï¼Œmetadataï¼Œdirectoriesã€‚</p><p>å­˜å‚¨åœ¨æœ¬åœ°ï¼Œnamespace imageå’Œedit log</p><p>å¹¶ä¸”ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œè¿˜ä¼šé€šè¿‡datanodeå»ºç«‹ä¸€ä¸ªæ–‡ä»¶å—å’Œdatanodeçš„ä½ç½®æ˜ å°„ï¼Œä½†æ˜¯æ˜¯éæŒä¹…åŒ–çš„ã€‚</p><p>Namenodeå¦‚æœæŒ‚äº†ï¼Œæ•°æ®å°±å…¨ä¸¢å¤±äº†ã€‚å› ä¸ºæ²¡æœ‰åŠæ³•çŸ¥é“å¦‚ä½•ä»å—é‡å»ºæ–‡ä»¶ã€‚</p><p>ç¬¬ä¸€ç§åŠæ³•ï¼Œå°±æ˜¯å¤‡ä»½Namenodeçš„stateï¼Œå†™åˆ°æœ¬åœ°ç£ç›˜æˆ–è€…nfsã€‚</p><p>ç¬¬äºŒç§åŠæ³•ï¼Œå°±æ˜¯å¦å¤–è¿è¡Œä¸€ä¸ªnodeæ¥å®šæ—¶merge namespace imageå’Œedit logã€‚</p><p>Datanode: workers</p><p>å­˜å–å—ï¼Œæ¥å—namenodeæˆ–è€…clientçš„è¯·æ±‚ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="block-caching">Block Caching<a class="hash-link" href="#block-caching" title="Direct link to heading">â€‹</a></h5><p>æŒ‡å®šä¸€äº›ç»å¸¸ä½¿ç”¨çš„Blockï¼Œæ”¾å…¥å†…å­˜ä¸­ä½œä¸ºCache</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="memory">Memory<a class="hash-link" href="#memory" title="Direct link to heading">â€‹</a></h5><p>1,000 MB per million blocks of storage</p><p>a 200-node cluster with 24 TB of disk space per node, a block size of 128 MB, and a replication factor of 3</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; 200* 24000000 / 128 / 3 / 1000000 * 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12500.0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="federation">Federation<a class="hash-link" href="#federation" title="Direct link to heading">â€‹</a></h5><p>HDFS Federation, 2.xç‰ˆæœ¬å¼€å§‹, å¤šä¸ªNamenodeåˆ†åˆ«ç®¡ç†é›†ç¾¤ä¸­çš„ä¸€éƒ¨åˆ†</p><p>æ¯”å¦‚Node 0ç®¡ç†/userï¼ŒNode 1 ç®¡ç†/share</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="hdfs-ha">HDFS HA<a class="hash-link" href="#hdfs-ha" title="Direct link to heading">â€‹</a></h5><p>NFSæˆ–è€…QJMï¼Œæ¥è®©ä¸€å¯¹çƒ­å¤‡çš„Namenodeèƒ½å¤ŸåŒæ—¶è®¿é—®åˆ°edit logï¼Œç„¶åèƒ½å¤Ÿæ¥ç®¡</p><p>QJMå°±æ˜¯ä¸€ä¸ªå°å‹çš„HDFSï¼Œæä¾›é«˜å¯ç”¨edit log</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="failover">Failover<a class="hash-link" href="#failover" title="Direct link to heading">â€‹</a></h5><p>ZooKeeperç¡®å®šåªæœ‰ä¸€ä¸ªNamenodeæ˜¯æ´»åŠ¨çš„</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="fencing">Fencing<a class="hash-link" href="#fencing" title="Direct link to heading">â€‹</a></h5><p>å‡è®¾åŸæœ‰çš„Nodeä¾ç„¶åœ¨è¿è¡Œï¼Œä½†ç”±äºç½‘ç»œåŸå› è¢«è®¤ä¸ºå¤±æ•ˆäº†ï¼Œè§¦å‘äº†Failoverï¼Œéœ€è¦ä¸€äº›æœºåˆ¶æ¥ç¡®ä¿è¿™ä¸ªNodeä¸é€ æˆå¤ªå¤šçš„ä¼¤å®³ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºFencing</p><p>QJMåªå…è®¸åŒæ—¶æœ‰ä¸€ä¸ªNamenodeå†™edit logï¼Œä½†æ˜¯NFSæ²¡åŠæ³•åšåˆ°</p><p><em>STONITH</em>, or â€œshoot the other node in the head,â€ </p><p>ç›´æ¥æ§åˆ¶ç”µæºè®©å¦ä¸€ä¸ªhostå…³æœº</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="ç®€å•å‘½ä»¤">ç®€å•å‘½ä»¤<a class="hash-link" href="#ç®€å•å‘½ä»¤" title="Direct link to heading">â€‹</a></h4><p>From Local</p><p><code>hadoop fs -copyFromLocal input/docs/quangle.txt /user/tom/quangle.txt</code></p><p>To Local</p><p><code>hadoop fs -copyToLocal quangle.txt quangle.copy.txt</code></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="data-flow-1">Data Flow<a class="hash-link" href="#data-flow-1" title="Direct link to heading">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="client-access-mode">Client Access Mode<a class="hash-link" href="#client-access-mode" title="Direct link to heading">â€‹</a></h5><p><img alt="Accessing HDFS over HTTP directly and via a bank of HDFS proxies" src="/assets/images/hddg_0301-82db54098077811ac4a9b3e42a3b4f8b.png" width="984" height="1000"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="file-write">File Write<a class="hash-link" href="#file-write" title="Direct link to heading">â€‹</a></h5><p><img alt="A client writing data to HDFS" src="/assets/images/hddg_0304-b3d309abf2a2450c2c4d5c0e1917580c.png" width="1000" height="687"></p><p>NameNodeä¼šå…ˆå»check æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ˜¯å¦æœ‰æƒé™ç­‰ã€‚å¦‚æœchecké€šè¿‡äº†ï¼Œä¼šå¢åŠ ä¸€æ¡new fileçš„recordã€‚</p><p><code>dfs.namenode.replication.min</code> replicas (which defaults to 1) are written, å°±ä¼šsuccess</p><p>asynchronously replicated across the cluster, <code>dfs.replication</code>, which defaults to 3</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="file-read">File Read<a class="hash-link" href="#file-read" title="Direct link to heading">â€‹</a></h5><p><img alt="A client reading data from HDFS" src="/assets/images/hddg_0302-c8cb8291ea25d076380dab6ecd22d5f1.png" width="1000" height="602"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="distances">Distances<a class="hash-link" href="#distances" title="Direct link to heading">â€‹</a></h5><ul><li><em>distance(/d1/r1/n1, /d1/r1/n1)</em> = 0 (processes on the same node)</li><li><em>distance(/d1/r1/n1, /d1/r1/n2)</em> = 2 (different nodes on the same rack)</li><li><em>distance(/d1/r1/n1, /d1/r2/n3)</em> = 4 (nodes on different racks in the same data center)</li><li><em>distance(/d1/r1/n1, /d2/r3/n4)</em> = 6 (nodes in different data centers)</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="replica-strategy">Replica Strategy<a class="hash-link" href="#replica-strategy" title="Direct link to heading">â€‹</a></h5><p><img alt="A typical replica pipeline" src="/assets/images/hddg_0305-dd6b7f3ffae9cc0ec406e8ab622da51c.png" width="699" height="772"></p><p>åŒNodeï¼ŒNode On other rack, other node on that rack</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="flush">Flush<a class="hash-link" href="#flush" title="Direct link to heading">â€‹</a></h5><p>æ­£åœ¨å†™çš„Blockï¼Œå¾ˆå¯èƒ½è¿˜æ˜¯è¯»å–ä¸äº†çš„çŠ¶æ€ï¼Œéœ€è¦è¾¾åˆ°ä¸€ä¸ªBlockçš„å¤§å°åç¼“å­˜æ‰ä¼šè¢«Flushã€‚å½“ç„¶ä¹Ÿæœ‰APIå¯ä»¥Force Flush</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parallel-copying">Parallel Copying<a class="hash-link" href="#parallel-copying" title="Direct link to heading">â€‹</a></h5><p><code> hadoop distcp file1 file2</code></p><p>distcpæœ¬èº«æ˜¯ä¸€ä¸ªMapReduce Jobï¼Œæ¯ä¸ªfileéƒ½è¢«ä¸€ä¸ªmap copyã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="yarn-yet-another-resource-negotiator">YARN (Yet Another Resource Negotiator)<a class="hash-link" href="#yarn-yet-another-resource-negotiator" title="Direct link to heading">â€‹</a></h3><p>Yarn æ˜¯Hadoopçš„é›†ç¾¤èµ„æºç®¡ç†ç³»ç»Ÿã€‚</p><p><img alt="YARN applications" src="/assets/images/hddg_0401-505d71e442efe4ce248f91816823d9a9.png" width="1000" height="361"></p><p>æä¾›ä¸€ä¸ªAPIæ¥è®¿é—®é›†ç¾¤çš„èµ„æºï¼Œé€šå¸¸æ˜¯è¢«æ›´é«˜çº§çš„APIè°ƒç”¨çš„ã€‚</p><p><img alt="How YARN runs an application" src="/assets/images/hddg_0402-675ca1e354d72d1ce4f647d35db97ca4.png" width="1000" height="985"></p><p>è¿™ä¸ªContainerå¯ä»¥æ˜¯Unix Processï¼Œä¹Ÿå¯ä»¥æ˜¯Linuxçš„cgroup</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="resource-requests">Resource Requests<a class="hash-link" href="#resource-requests" title="Direct link to heading">â€‹</a></h5><p>Yarn Applicationå¯ä»¥åœ¨è¿è¡Œå‰å°±ç”³è¯·å¥½æ‰€æœ‰èµ„æºï¼Œæˆ–è€…åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ç”³è¯·æ›´å¤šçš„èµ„æºã€‚</p><p>Sparkå°±æ˜¯ä½¿ç”¨çš„å‰ä¸€ç§æ–¹å¼</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="application-lifespan">Application Lifespan<a class="hash-link" href="#application-lifespan" title="Direct link to heading">â€‹</a></h5><p>App per job</p><p>App per workflow/session of jobs</p><p>Long-running</p><p>Sparké‡‡ç”¨çš„ç¬¬äºŒç§</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="mapreduce-1-and-yarn">Mapreduce 1 and Yarn<a class="hash-link" href="#mapreduce-1-and-yarn" title="Direct link to heading">â€‹</a></h5><table><thead><tr><th>MapReduce 1</th><th>YARN</th></tr></thead><tbody><tr><td>Jobtracker</td><td>Resource manager, application master, timeline server</td></tr><tr><td>Tasktracker</td><td>Node manager</td></tr><tr><td>Slot</td><td>Container</td></tr><tr><td>4000 nodes and 40000 tasks</td><td>10000 nodes and 100000 tasks</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mojV" id="scheduler-options">Scheduler Options<a class="hash-link" href="#scheduler-options" title="Direct link to heading">â€‹</a></h5><p>FIFOã€Capacityã€Fair</p><p><img alt="Cluster utilization over time when running a large job and a small job under the FIFO Scheduler (i), Capacity Scheduler (ii), and Fair Scheduler (iii)" src="/assets/images/hddg_0403-91bd7d465f01d39e5212e61ed800e430.png" width="382" height="1000"></p><p>Capacity schedulerçš„èµ„æºæ˜¯åœ¨é…ç½®é‡Œå®šä¹‰çš„</p><p>Fair Schedulerï¼šç”¨æˆ·A å’Œç”¨æˆ·B å¦‚ä¸‹å›¾</p><p><img alt="Fair sharing between user queues" src="/assets/images/hddg_0404-653cd8c49bb839c8537197fb5994eed1.png" width="755" height="714"></p><p>èµ„æºåœ¨ç”¨æˆ·ä¹‹é—´ä¹Ÿæ˜¯Fair sharedã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="dominant-resource-fairness">Dominant Resource Fairness<a class="hash-link" href="#dominant-resource-fairness" title="Direct link to heading">â€‹</a></h5><p>è¿™ä¸ªå¾ˆæœ‰æ„æ€ï¼Œæ˜¯é’ˆå¯¹ä»»åŠ¡ä½¿ç”¨å¼‚æ„èµ„æºçš„ç®—æ³•ã€‚</p><p>å‡å¦‚é›†ç¾¤æœ‰100CPU 10T å†…å­˜ï¼ŒAä»»åŠ¡éœ€æ±‚ 2CPU 300Gå†…å­˜ï¼ŒBä»»åŠ¡éœ€æ±‚6CPU 100Gå†…å­˜</p><p>å®ƒæ˜¯æŒ‰ç…§èµ„æºéœ€æ±‚å é›†ç¾¤æ€»èµ„æºçš„ç™¾åˆ†æ¯”ç®—çš„ï¼ŒAå 2% 3%,Bå 6% 1%</p><p>æ‰€ä»¥Bçš„Containeræ•°é‡ä¼šæ¯”Aå°‘ä¸€åŠï¼Œæ¥è¾¾åˆ°å¹³è¡¡</p><p>é»˜è®¤DRFæ˜¯å…³é—­çš„ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="data-integrity">Data Integrity<a class="hash-link" href="#data-integrity" title="Direct link to heading">â€‹</a></h5><p>HDFSé»˜è®¤ä¼šåœ¨æ•°æ®å†™å…¥åè®¡ç®—checksumï¼Œç„¶ååœ¨è¯»å–æ—¶éªŒè¯ã€‚</p><p>é»˜è®¤æ¯512byteå°±è¿›è¡Œä¸€æ¬¡CRC-32C checksumï¼Œå­˜ä¸€ä¸ª4byteçš„å“ˆå¸Œå€¼ã€‚</p><p>Datanode è´Ÿè´£åœ¨æ•°æ®å†™å…¥ä¹‹å‰éªŒè¯checksumï¼Œç„¶ååœ¨è¯»å–æ—¶ä¹Ÿæ˜¯ä¸€æ ·ã€‚æ¯ä¸ªDatanodeéƒ½æœ‰ä¸€ä¸ªpersistent logæ¥è®°å½•verificationï¼Œè®°å½•æœ€åä¸€æ¬¡æ¯ä¸ªBlockéªŒè¯çš„æ—¶é—´ã€‚ClientéªŒè¯Blockåï¼Œä¼šå›ä¼ ç»“æœç»™Datanodeæ›´æ–°logã€‚</p><p>é™¤äº†åœ¨è¯»å†™æ“ä½œä»¥å¤–ï¼ŒDataBlockScannerè¿˜ä¼šåœ¨åå°å®šæœŸæ£€æŸ¥éªŒè¯blocksã€‚</p><p>å½“å‘ç°å‡ºé”™åï¼Œç”±äºHDFSæœ‰å¤šä¸ªå¤‡ä»½ï¼Œå°±å¯ä»¥æŠŠä¸€ä¸ªå¥½çš„å¤‡ä»½å¤åˆ¶è¿‡æ¥ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="compression">Compression<a class="hash-link" href="#compression" title="Direct link to heading">â€‹</a></h5><table><thead><tr><th>Compression format</th><th>Tool</th><th>Algorithm</th><th>Filename extension</th><th>Splittable?</th></tr></thead><tbody><tr><td>DEFLATE[<a href="https://learning.oreilly.com/library/view/hadoop-the-definitive/9781491901687/ch05.html#ftn.id585983" target="_blank" rel="noopener noreferrer">a</a>]</td><td>N/A</td><td>DEFLATE</td><td><em>.deflate</em></td><td>No</td></tr><tr><td>gzip</td><td><em>gzip</em></td><td>DEFLATE</td><td><em>.gz</em></td><td>No</td></tr><tr><td>bzip2</td><td><em>bzip2</em></td><td>bzip2</td><td><em>.bz2</em></td><td>Yes</td></tr><tr><td>LZO</td><td><em>lzop</em></td><td>LZO</td><td><em>.lzo</em></td><td>No[<a href="https://learning.oreilly.com/library/view/hadoop-the-definitive/9781491901687/ch05.html#ftn.id726357" target="_blank" rel="noopener noreferrer">b</a>]</td></tr><tr><td>LZ4</td><td>N/A</td><td>LZ4</td><td><em>.lz4</em></td><td>No</td></tr><tr><td>Snappy</td><td>N/A</td><td>Snappy</td><td><em>.snappy</em></td><td>No</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mojV" id="splitting">Splitting<a class="hash-link" href="#splitting" title="Direct link to heading">â€‹</a></h5><p>å¦‚æœå‹ç¼©æ–‡ä»¶å¤§äº128MBï¼Œé‚£ä¹ˆå°±ä¼šè¢«åˆ†æˆå¤šä¸ªBlockã€‚ç„¶è€Œï¼Œä¸æ˜¯æ‰€æœ‰æ ¼å¼éƒ½æ”¯æŒä»»æ„åŒºåŸŸå¼€å§‹è§£å‹ç¼©ã€‚æ¯”å¦‚gzipï¼Œå°±å¿…é¡»åŒä¸€ä¸ªMapå®Œæˆè¿ç»­å¤šä¸ªBlockçš„è¯»å–æ¥å®Œæˆè§£å‹ã€‚</p><p>Bz2ï¼ŒLZOéƒ½æ˜¯å¯ä»¥åˆ†å—çš„ï¼Œè¿™æ ·å¯ä»¥åˆ†å¸ƒå¼åœ°å¤„ç†</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="sequencefile">SequenceFile<a class="hash-link" href="#sequencefile" title="Direct link to heading">â€‹</a></h5><p><img alt="The internal structure of a sequence file with no compression and with record compression" src="/assets/images/hddg_0502-a0e1ef72e84ab76bbedf95de7921eac3.png" width="1000" height="529"></p><p><img alt="The internal structure of a sequence file with block compression" src="/assets/images/hddg_0503-4f3251d4d3811eccf37528af01dbe1cb.png" width="1000" height="355"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="run-a-mapreduce-job">Run a MapReduce Job<a class="hash-link" href="#run-a-mapreduce-job" title="Direct link to heading">â€‹</a></h5><p><img alt="How Hadoop runs a MapReduce job" src="/assets/images/hddg_0701-2fdcca932e60f88b5f572fb72f9f5153.png" width="1000" height="988"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="streaming">Streaming<a class="hash-link" href="#streaming" title="Direct link to heading">â€‹</a></h5><p><img alt="The relationship of the Streaming executable to the node manager and the task container" src="/assets/images/hddg_0702-b3791110376be07016d6e7fd620bada8.png" width="448" height="1000"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="shuffle-and-sort">Shuffle and Sort<a class="hash-link" href="#shuffle-and-sort" title="Direct link to heading">â€‹</a></h4><p><img alt="Shuffle and sort in MapReduce" src="/assets/images/hddg_0704-07f10a071f0f4f7892b3605621ca724d.png" width="1000" height="447"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="map-side">Map Side<a class="hash-link" href="#map-side" title="Direct link to heading">â€‹</a></h5><p>æ¯ä¸ªMapéƒ½æœ‰ä¸€ä¸ªmemory bufferï¼Œé»˜è®¤æ˜¯100MBã€‚</p><p>Mapä¼šå°†è¾“å‡ºå†™åˆ°è¿™ä¸ªbufferé‡Œï¼Œæ¯å½“bufferå†™æ»¡åï¼Œå°±ä¼šè§¦å‘spillï¼Œåˆ›å»ºä¸€ä¸ªç£ç›˜ä¸Šçš„spillæ–‡ä»¶ç„¶åæ¸…ç©ºbufferã€‚è¿™ä¸ªbufferæ˜¯åˆ†åŒº(partitioned)çš„ï¼Œå¯¹åº”ä¸‹æ¸¸çš„reducerã€‚ç„¶åå¯¹æ¯ä¸ªpartitionï¼Œåå°ä¼šæœ‰ä¸€ä¸ªè¿›ç¨‹å¯¹å…¶ä¸­çš„keyè¿›è¡Œsortï¼Œç„¶åå†å¯¹sortè¿è¡Œä¸€è¾¹combinerã€‚</p><p>å¤šä¸ªSpillæ–‡ä»¶ä¼šè¢«åˆæˆä¸ºä¸€ä¸ªåˆ†å—çš„æœ‰åºæ–‡ä»¶ã€‚å¦‚æœåˆæˆå‰spill æ–‡ä»¶å¤§äº3ä¸ªï¼Œcombinerä¼šå†æ¬¡è¿è¡Œï¼Œå¦åˆ™ä¸ä¼šè¿è¡Œã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæ•°æ®ä¹Ÿä¼šè¢«å‹ç¼©ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="reduce-side">Reduce Side<a class="hash-link" href="#reduce-side" title="Direct link to heading">â€‹</a></h5><p>å½“Map ä»»åŠ¡å®Œæˆåï¼Œä¼šå‘Application Masterå‘é€æ¶ˆæ¯ï¼Œç„¶åå°±çŸ¥é“äº†Map outputå’Œhostçš„å…³ç³»ã€‚åªæœ‰å½“Application Masterå‘map hostå‘é€æ¶ˆæ¯è¦æ±‚åˆ é™¤ç»“æœåï¼Œç»“æœæ‰ä¼šè¢«åˆ é™¤ã€‚</p><p>Copy phaseï¼šä»map outputå¤åˆ¶ç»“æœï¼Œåå°æœ‰å¤šä¸ªcopier threadsï¼Œé»˜è®¤æ˜¯5ä¸ªã€‚</p><p>å½“copiesè¢«å¤åˆ¶åˆ°ç£ç›˜ä¸Šï¼Œå°±ä¼šå¼€å§‹mergeã€‚è¿™ä¸ªè¿‡ç¨‹ç”±merge factoræ§åˆ¶ï¼Œå¦‚æœé»˜è®¤å€¼10ï¼Œæ”¶åˆ°äº†50ä¸ªç»“æœï¼Œå°±è¦merge 5æ¬¡åå½¢æˆ5ä¸ªæ–‡ä»¶ã€‚æœ€åè¿™5ä¸ªæ–‡ä»¶ä¸ä¼šè¢«mergeï¼Œè€Œæ˜¯ç›´æ¥é€åˆ°reducer</p><p><img alt="Efficiently merging 40 file segments with a merge factor of 10" src="/assets/images/hddg_0705-7df5dacfb8bd9b80e405a767ecaad8a3.png" width="704" height="1000"></p><p>å¦‚æœæ˜¯40ä¸ªæ–‡ä»¶ï¼šç¬¬ä¸€æ¬¡4ä¸ªï¼Œç„¶å10ã€10ã€10 è¿™å››æ¬¡äº§ç”Ÿçš„4ä¸ªæ–‡ä»¶å’Œæœ€åå‰©ä¸‹çš„6ä¸ªåˆå¹¶æˆä¸ºä¸€æ¬¡mergeã€‚</p><p>è¿™æ ·åšæ˜¯ä¸ºäº†æœ€å°åŒ–ioæ¬¡æ•°ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="speculative-execution">Speculative Execution<a class="hash-link" href="#speculative-execution" title="Direct link to heading">â€‹</a></h5><p>å¦‚æœhadoopåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç°å“ªä¸ªtaskæ¯”é¢„æœŸæ‰§è¡Œåœ°æ…¢ï¼Œå°±ä¼šå¯åŠ¨ä¸€ä¸ªåŒæ ·å†…å®¹çš„backup ä»»åŠ¡ã€‚è°å…ˆå®Œæˆï¼Œå¦ä¸€ä¸ªéƒ½ä¼šè¢«killæ‰ã€‚è¿™éƒ¨åˆ†åªä¼šå å¾ˆå°ä¸€éƒ¨åˆ†ï¼Œæ˜¾è‘—æ…¢äºå…¶ä»–ä»»åŠ¡æ—¶æ‰ä¼šè§¦å‘ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="filesystem-image-and-edit-log">Filesystem Image and Edit log<a class="hash-link" href="#filesystem-image-and-edit-log" title="Direct link to heading">â€‹</a></h5><p>å½“å®¢æˆ·ç«¯å‘èµ·å†™è¯·æ±‚ï¼Œè¿™ä¸ªæ“ä½œä¼šè¢«è®°å½•åœ¨edit logä¸­ã€‚namenodeåœ¨å†…å­˜ä¸­ä¹Ÿä¼šæœ‰ä¸€ä¸ªmetadataçš„æ•°æ®ç»“æ„ï¼Œåœ¨edit logä¿®æ”¹åæ›´æ–°ã€‚è¿™ä¸ªå†…å­˜ä¸­çš„metadataä¼šç”¨æ¥å“åº”è¯»è¯·æ±‚ã€‚</p><p>Edit logäº‹å®ä¸Šæ˜¯å¾ˆå¤šæ–‡ä»¶ï¼Œå¦‚<em>edits_inprogress_0000000000000000020</em> åç¼€æ˜¯transaction IDï¼Œå‰ç¼€æ˜¯editã€‚</p><p>æ¯æ¬¡åªæœ‰ä¸€ä¸ªæ–‡ä»¶æ‰“å¼€å¯ä»¥å†™å…¥ï¼Œåœ¨äº‹åŠ¡å®Œæˆåflushï¼Œsyncã€‚</p><p>fsimageæ˜¯ metadataçš„å®Œå…¨checkpointï¼Œé€šå¸¸å¾ˆå¤§ï¼ŒGBçº§åˆ«ã€‚å†…å®¹åŒ…å«æ–‡ä»¶ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„inodeï¼Œä»£è¡¨metadataã€‚fsimage<strong>ä¸åŒ…å«</strong>blockåœ¨å“ªä¸ªdatanodeä¸Šå­˜å‚¨ã€‚</p><p>ä¸ºäº†ä¸è®©Edit logè¿‡å¤šï¼Œåªèƒ½å¦èµ·ä¸€ä¸ªnamenodeï¼Œå®šæ—¶åœ°å–æœ€æ–°çš„fsimageå’Œedit logï¼Œç„¶ååˆå¹¶æˆæœ€æ–°çš„fsimageå›ä¼ ç»™namenodeï¼Œè¿™æ ·edit logå°±ä¸ä¼šå¤ªå¤šã€‚</p><p><img alt="The checkpointing process" src="/assets/images/hddg_1101-ea910422f7350ad26adec87e726ddc0e.png" width="921" height="1000"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="safe-mode">Safe mode<a class="hash-link" href="#safe-mode" title="Direct link to heading">â€‹</a></h5><p>åªå¯¹clientæä¾›æ–‡ä»¶ç³»ç»Ÿçš„Read-only view</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="balancer">Balancer<a class="hash-link" href="#balancer" title="Direct link to heading">â€‹</a></h5><p>æŠŠç©ºé—´ä½¿ç”¨ç‡æœ€é«˜çš„nodeä¸Šä¸€éƒ¨åˆ†blockç§»åŠ¨åˆ°æœ€ä½çš„node</p><p><code>start-balancer.sh</code></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="å®‰è£…">å®‰è£…<a class="hash-link" href="#å®‰è£…" title="Direct link to heading">â€‹</a></h4><p><code>brew install hadoop</code></p><p>æ³¨æ„å®‰è£…çš„ä½ç½®</p><p>æœ¬ä¹¦çš„ä»£ç å¯ä»¥åœ¨githubä¸Šæ‰¾åˆ°ï¼Œrepo ownerå°±æ˜¯ä¹¦çš„ä½œè€…</p><p><a href="https://github.com/tomwhite/hadoop-book" target="_blank" rel="noopener noreferrer">tomwhite/hadoop-book: Example source code accompanying O&#x27;Reilly&#x27;s &quot;Hadoop: The Definitive Guide&quot; by Tom White (github.com)</a></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">hadoop-book git:(master) âœ— hadoop jar /opt/homebrew/Cellar/hadoop/3.3.3/libexec/share/hadoop/tools/lib/hadoop-streaming-*.jar \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -input input/ncdc/sample.txt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -output output \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -mapper ch02-mr-intro/src/main/python/max_temperature_map.py \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -reducer ch02-mr-intro/src/main/python/max_temperature_reduce.py</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><a href="https://towardsdatascience.com/installing-hadoop-on-a-mac-ec01c67b003c" target="_blank" rel="noopener noreferrer">Installing Hadoop on a Mac. The only guide you will ever need! | by Siphu Langeni, MS | Towards Data Science</a></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ open core-site.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ open hdfs-site.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;dfs.replication&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;value&gt;1&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ open mapred-site.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;value&gt;yarn&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;mapreduce.application.classpath&lt;/name&gt;   &lt;value&gt;/opt/homebrew/Cellar/hadoop/3.3.3/libexec/share/hadoop/mapreduce/*:/opt/homebrew/Cellar/hadoop/3.3.3/libexec/share/hadoop/mapreduce/lib/*&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">open yarn-site.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;property&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;value&gt;mapreduce_shuffle&lt;/value&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/property&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;property&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt; &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/value&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/property&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/configuration&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Ssh æœ¬åœ°å¯ä»¥è·‘é€šï¼Œåœ¨è®¾ç½®é‡Œæ‰“å¼€æƒé™</p><p><img alt="image-20220822092415975" src="/assets/images/image-20220822092415975-543a7f23bdc85f3bcfba7f50e627bf61.png" width="1318" height="1062"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="ç›¸å…³é¡¹ç›®æ·±å‘">ç›¸å…³é¡¹ç›®ï¼ˆæ·±å‘ï¼‰<a class="hash-link" href="#ç›¸å…³é¡¹ç›®æ·±å‘" title="Direct link to heading">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="avro">Avro<a class="hash-link" href="#avro" title="Direct link to heading">â€‹</a></h5><p>æ•°æ®åºåˆ—åŒ–ç³»ç»Ÿ</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parquet">Parquet<a class="hash-link" href="#parquet" title="Direct link to heading">â€‹</a></h5><p>åˆ—å­˜å‚¨æ ¼å¼</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="flume">Flume<a class="hash-link" href="#flume" title="Direct link to heading">â€‹</a></h5><p>æ•°æ®Ingestion</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="sqoop">Sqoop<a class="hash-link" href="#sqoop" title="Direct link to heading">â€‹</a></h5><p>ä»å…³ç³»å‹æ•°æ®åº“æå–æ•°æ®</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="pig">Pig<a class="hash-link" href="#pig" title="Direct link to heading">â€‹</a></h5><p>å¤„ç†å¤§å‹æ•°æ®é›†</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="hive">Hive<a class="hash-link" href="#hive" title="Direct link to heading">â€‹</a></h5><p>Data warehouse</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="crunch">Crunch<a class="hash-link" href="#crunch" title="Direct link to heading">â€‹</a></h5><p>Map Reduceé«˜çº§API</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="spark">Spark<a class="hash-link" href="#spark" title="Direct link to heading">â€‹</a></h5><p>å¤§æ•°æ®å¤„ç†å¼•æ“</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="hbase">HBase<a class="hash-link" href="#hbase" title="Direct link to heading">â€‹</a></h5><p>Big table</p><p>è¿™äº›æœ‰ç©ºå†æ›´æ–°å§â€¦â€¦</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/big-data/hadoop.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/ai/interpretable_ai"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">interpretable_ai</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/big-data/kafka"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">kafka</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#hadoop" class="table-of-contents__link toc-highlight">Hadoop</a></li><li><a href="#hadoop-distributed-filesystem-hdfs" class="table-of-contents__link toc-highlight">Hadoop Distributed Filesystem (HDFS)</a></li><li><a href="#yarn-yet-another-resource-negotiator" class="table-of-contents__link toc-highlight">YARN (Yet Another Resource Negotiator)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8c487385.js"></script>
<script src="/assets/js/main.036a9873.js"></script>
</body>
</html>