<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Hyc3z&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Hyc3z&#39;s blog Atom Feed"><title data-react-helmet="true">kafka | Hyc3z&#x27;s blog</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hyc3z.github.io/docs/big-data/kafka"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="kafka | Hyc3z&#x27;s blog"><meta data-react-helmet="true" name="description" content="kafkaç®€ä»‹"><meta data-react-helmet="true" property="og:description" content="kafkaç®€ä»‹"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hyc3z.github.io/docs/big-data/kafka"><link data-react-helmet="true" rel="alternate" href="https://hyc3z.github.io/docs/big-data/kafka" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hyc3z.github.io/docs/big-data/kafka" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.366311be.css">
<link rel="preload" href="/assets/js/runtime~main.fb9af459.js" as="script">
<link rel="preload" href="/assets/js/main.47f840b1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Hyc3z&#x27;s blog</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyc3z" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Hyc3z<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ğŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ğŸŒ</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/cpp/pcal">cpp</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/blockchain/Chainlink">blockchain</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/ai/deep_learning">ai</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/big-data/hadoop">big-data</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/big-data/hadoop">hadoop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/big-data/kafka">kafka</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/cryptography/overview">cryptography</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/database/Oracle">database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/data/data_science">data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/docs/git/">git</a><button aria-label="Toggle the collapsible sidebar category &#x27;git&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/design/microservices">design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/graph/graph-database">graph</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/python/re">python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/ts/typescript">ts</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>kafka</h1></header><h3 class="anchor anchorWithStickyNavbar_mojV" id="kafkaç®€ä»‹"><a href="https://zhuanlan.zhihu.com/p/37405836" target="_blank" rel="noopener noreferrer">kafkaç®€ä»‹</a><a class="hash-link" href="#kafkaç®€ä»‹" title="Direct link to heading">â€‹</a></h3><p>Kafkaæœ€æ—©è¯ç”Ÿæ˜¯ä¸ºäº†è§£å†³Linkedinçš„data pipelineé—®é¢˜ã€‚</p><p><a href="https://engineering.linkedin.com/distributed-systems/log-what-every-software-engineer-should-know-about-real-time-datas-unifying" target="_blank" rel="noopener noreferrer">log</a></p><p>æ•°æ®å¤„ç†æœ€é‡è¦çš„æ˜¯æœ‰ä¸€ä¸ªå®Œæ•´çš„æ•°æ®æµï¼Œè€Œä¸æ˜¯æ•°æ®æ¨¡å‹</p><p>æ—¥å¿—å……å½“äº†ä¸€ä¸ªç¼“å­˜ä½œç”¨ï¼Œä½¿å¾—è¯»å†™å¯ä»¥å¼‚æ­¥</p><p>Data which is collected in batch is naturally processed in batch. When  data is collected continuously, it is naturally processed continuously. </p><p><img alt="kdg2 0102" src="/assets/images/kdg2_0102-3ff1d183894dec028ba940ac5c22c527.png" width="600" height="202"></p><p><img alt="kdg2 0103" src="/assets/images/kdg2_0103-d273072b356aca9371f513a329584120.png" width="600" height="242"></p><p>ä½¿ç”¨Kafkaçš„ä¼˜åŠ¿æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼šä¸éœ€è¦å†å»åšå„ç§å„æ ·çš„routingå’Œwiringï¼Œå°±èƒ½å°†metricsé€šè¿‡ç»Ÿä¸€çš„å¹³å°è¿›è¡Œç»Ÿè®¡ã€åˆ†æå’Œåˆ†å‘ã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="schema">Schema<a class="hash-link" href="#schema" title="Direct link to heading">â€‹</a></h4><p>Kafkaçš„æ¶ˆæ¯éƒ½æ˜¯å­—èŠ‚æ•°ç»„ï¼Œä½†æ˜¯ä¹Ÿæ˜¯æœ‰ç»“æ„å®šä¹‰çš„ã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="stream">Stream<a class="hash-link" href="#stream" title="Direct link to heading">â€‹</a></h4><p><img alt="kdg2 0105" src="/assets/images/kdg2_0105-f0095512f3a6e6e3d6319de7731a6f27.png" width="600" height="202"></p><p>StreamæŒ‡çš„æ˜¯åŒä¸€ä¸ªTopicçš„æ¶ˆæ¯ï¼Œå’ŒPartitionçš„æ•°é‡æ— å…³ã€‚åŒä¸€ä¸ªæ¶ˆæ¯å¯ä»¥æœ‰å¤šä¸ªPartitionï¼Œä¹Ÿå¯ä»¥åˆ†æ•£åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œæå‡æ€§èƒ½å’Œå†—ä½™åº¦ã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="producer-consumer">Producer Consumer<a class="hash-link" href="#producer-consumer" title="Direct link to heading">â€‹</a></h4><p>ProduceræŒ‡çš„å°±æ˜¯æ¶ˆæ¯çš„ç”Ÿäº§è€…ï¼Œé€šå¸¸ä¼šå¹³å‡åœ°å‘æ¯ä¸ªPartitionåˆ†æ‘Šæ¶ˆæ¯ã€‚ä½†ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œç”Ÿäº§è€…åªä¼šå‘ç‰¹å®šçš„Partitionå‘é€æ¶ˆæ¯ã€‚</p><p>Consumerè¯»å–æ¶ˆæ¯ï¼Œè®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªTopicï¼ŒæŒ‰é¡ºåºè¯»å–æ¶ˆæ¯ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="offset">Offset<a class="hash-link" href="#offset" title="Direct link to heading">â€‹</a></h5><p>Consumerå’ŒKafkaéƒ½ä¿ç•™äº†ä¸€ä¸ªOffsetï¼Œä¸€ä¸ªä¸å®Œå…¨å•è°ƒé€’å¢çš„intï¼Œåæ¥çš„æ¶ˆæ¯offsetæ›´å¤§ã€‚æ¯ä¸ªpartitionçš„offsetéƒ½è¢«ä¿å­˜ç€ï¼Œè¿™æ ·Consumeræš‚åœæ¥å—æ¶ˆæ¯åï¼Œå°±å¯ä»¥resumeã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="consumer-group">Consumer group<a class="hash-link" href="#consumer-group" title="Direct link to heading">â€‹</a></h5><p>ä¸€ä¸ªæˆ–å¤šä¸ªConsumerå…±åŒæ¶ˆè´¹åŒä¸€ä¸ªtopicã€‚Consumer groupç¡®ä¿æ¯ä¸ªpartitionåªä¼šè¢«ä¸€ä¸ªmemberæ¶ˆè´¹ã€‚è¿™ä¹Ÿè¢«ç§°ä¸ºOwnershipã€‚</p><p><img alt="kdg2 0106" src="/assets/images/kdg2_0106-83073a5adf405a3bbffdc36ef66cfb92.png" width="600" height="246"></p><p>å¦‚æœä¸€ä¸ªmember failäº†ï¼Œé‚£ä¸ªpartitionä¼šè¢«é‡æ–°åˆ†é…åˆ°å‰©ä½™çš„membersä¸­ã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="brokers-and-clusters">Brokers and Clusters<a class="hash-link" href="#brokers-and-clusters" title="Direct link to heading">â€‹</a></h4><p><img alt="kdg2 0107" src="/assets/images/kdg2_0107-b4ebe8f1030867ba5db2a5ee89de5fdc.png" width="600" height="359"></p><p>Brokerä»produceræ¥å—æ¶ˆæ¯ï¼Œè®¾ç½®offsetï¼Œç„¶åå†™å…¥å­˜å‚¨ã€‚æ¶ˆæ¯æœ‰ä¸»ä»åŒæ­¥ã€‚</p><p>æ¶ˆæ¯æœ‰å­˜å‚¨é™åˆ¶å’Œæ—¶é•¿é™åˆ¶ï¼Œè¶…å‡ºäº†å°±ä¼šè¢«åˆ æ‰ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="mirrormaker">MirrorMaker<a class="hash-link" href="#mirrormaker" title="Direct link to heading">â€‹</a></h5><p><img alt="kdg2 0108" src="/assets/images/kdg2_0108-6511d0382ca6da80e989d49e18c6ef1e.png" width="600" height="419"></p><p>ç¾å¤‡çš„MirrorMakeræœ¬èº«å°±æ˜¯ä¸€ä¸ªconsumerå’Œproducerï¼Œconsumeå…¶ä»–é›†ç¾¤çš„æ¶ˆæ¯ç„¶åproduceåˆ°æœ¬åœ°é›†ç¾¤ã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="ä¼˜åŠ¿">ä¼˜åŠ¿<a class="hash-link" href="#ä¼˜åŠ¿" title="Direct link to heading">â€‹</a></h4><p>å¤šProducerï¼Œå¤šConsumerï¼Œæœ¬åœ°ç•™å­˜ã€‚</p><p>é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="ç”Ÿæ€">ç”Ÿæ€<a class="hash-link" href="#ç”Ÿæ€" title="Direct link to heading">â€‹</a></h4><p><img alt="kdg2 0109" src="/assets/images/kdg2_0109-4b5a0ebf4c022d05751181192c3b5a7e.png" width="600" height="454"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="zookeeper">Zookeeper<a class="hash-link" href="#zookeeper" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="æ¶ˆæ¯é˜Ÿåˆ—çš„æŒ‘æˆ˜">æ¶ˆæ¯é˜Ÿåˆ—çš„æŒ‘æˆ˜<a class="hash-link" href="#æ¶ˆæ¯é˜Ÿåˆ—çš„æŒ‘æˆ˜" title="Direct link to heading">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="æ¶ˆæ¯å»¶è¿Ÿ">æ¶ˆæ¯å»¶è¿Ÿ<a class="hash-link" href="#æ¶ˆæ¯å»¶è¿Ÿ" title="Direct link to heading">â€‹</a></h5><p>â€‹	Pæ¯”Qå…ˆå‘é€æ¶ˆæ¯ï¼Œä½†Qçš„æ¶ˆæ¯å…ˆåˆ°</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="å¤„ç†é€Ÿåº¦">å¤„ç†é€Ÿåº¦<a class="hash-link" href="#å¤„ç†é€Ÿåº¦" title="Direct link to heading">â€‹</a></h5><p>â€‹	T~ps~ + T~s~ + T~pr~ æ—¶å»¶ = å‘é€+ä¼ è¾“+æ¥å—</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="æ—¶é’Ÿå¯¹é½">æ—¶é’Ÿå¯¹é½<a class="hash-link" href="#æ—¶é’Ÿå¯¹é½" title="Direct link to heading">â€‹</a></h5><p>â€‹	å¤„ç†å™¨æ—¶é’Ÿæœ‰å¯èƒ½ä¸å‡†ï¼Œæˆ–è€…æœªå¯¹é½</p><p>â€‹	</p><p>â€‹	æ¶ˆæ¯æ²¡æ”¶åˆ°ï¼Œæœ‰å¯èƒ½æ˜¯ä¸‰ç§æƒ…å†µçš„ä»»æ„ä¸€ç§</p><p>â€‹	</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="ä¸»ä»ç»“æ„">ä¸»ä»ç»“æ„<a class="hash-link" href="#ä¸»ä»ç»“æ„" title="Direct link to heading">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="ä¸»èŠ‚ç‚¹crash">ä¸»èŠ‚ç‚¹crash<a class="hash-link" href="#ä¸»èŠ‚ç‚¹crash" title="Direct link to heading">â€‹</a></h5><p>â€‹	éœ€è¦å¤‡ç”¨Masterï¼Œæ–°çš„Masterèƒ½å¤Ÿä»crashæ—¶çš„çŠ¶æ€æ¢å¤ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½æŒ‡æœ›ä»crashæ‰çš„masteré‚£é‡Œè¯»å–æ¢å¤æ—¶çš„contextï¼Œæ‰€ä»¥éœ€è¦æŠŠæ•°æ®å­˜åœ¨åˆ«çš„åœ°æ–¹ï¼Œå°±æ˜¯zookeeperé‡Œã€‚</p><p>â€‹	<em>split-brain</em> ä¸€ä¸ªç³»ç»Ÿä¸­ä¸¤ä¸ªæˆ–å¤šä¸ªéƒ¨åˆ†ç‹¬ç«‹åœ°å®Œæˆå·¥ä½œï¼Œæ¯”å¦‚masterå®é™…åœ¨å·¥ä½œï¼Œä½†ç”±äºç½‘ç»œæ•…éšœï¼Œé›†ç¾¤è¢«åˆ’åˆ†ä¸ºäº†ä¸¤åŠã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="worker-crash">Worker crash<a class="hash-link" href="#worker-crash" title="Direct link to heading">â€‹</a></h5><p>â€‹	é‡æ–°åˆ†é…è°ƒåº¦ç»™Workerçš„ä»»åŠ¡ã€‚ä»»åŠ¡å¯èƒ½æ‰§è¡Œäº†ä¸€åŠï¼Œä¹Ÿå¯èƒ½å·²ç»å®Œæˆä½†æ— æ³•æ±‡æŠ¥ç»“æœã€‚å¦‚æœæœ‰Side effectï¼Œé‚£ä¹ˆè¿˜éœ€è¦æ¸…ç†çŠ¶æ€ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="é€šè®¯æ•…éšœ">é€šè®¯æ•…éšœ<a class="hash-link" href="#é€šè®¯æ•…éšœ" title="Direct link to heading">â€‹</a></h5><p>â€‹	é”ä¸èƒ½è§£å†³é—®é¢˜</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="å…·ä½“åŠŸèƒ½">å…·ä½“åŠŸèƒ½<a class="hash-link" href="#å…·ä½“åŠŸèƒ½" title="Direct link to heading">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="master-election">Master election<a class="hash-link" href="#master-election" title="Direct link to heading">â€‹</a></h5><p>â€‹	æ‹¥æœ‰masteræ‰å…·æœ‰åˆ†é…ä»»åŠ¡çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å¿…é¡»èƒ½å¤Ÿé€‰ä¸¾</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="crash-detection">Crash detection<a class="hash-link" href="#crash-detection" title="Direct link to heading">â€‹</a></h5><p>â€‹	Masterèƒ½å¤Ÿæ£€æµ‹åˆ°worker crash</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="group-membership-management">Group membership management<a class="hash-link" href="#group-membership-management" title="Direct link to heading">â€‹</a></h5><p>â€‹	Masterèƒ½å¤Ÿå¾—çŸ¥å“ªäº›èŠ‚ç‚¹èƒ½å¤Ÿæ‰§è¡Œä»»åŠ¡</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="metadata-management">Metadata management<a class="hash-link" href="#metadata-management" title="Direct link to heading">â€‹</a></h5><p>â€‹	ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹éƒ½èƒ½å¤Ÿå­˜å‚¨åˆ†é…å’Œæ‰§è¡ŒçŠ¶æ€</p><p>Zookeeper å¹¶ä¸æ˜¯ Byzantine fault tolerantçš„ï¼Œå› ä¸ºè¿™ä¼šå¤§å¤§å¢åŠ å¤æ‚æ€§å’Œå¼€é”€ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="fischer-lynch-and-patterson-flp">Fischer, Lynch, and Patterson FLP<a class="hash-link" href="#fischer-lynch-and-patterson-flp" title="Direct link to heading">â€‹</a></h5><p>å¼‚æ­¥é€šä¿¡ï¼Œå¹¶ä¸”ä¼šæ•…éšœçš„è¿›ç¨‹ï¼Œå¹¶æ²¡æœ‰åŠæ³•å¯¹å“ªæ€•1bitçš„ä¿¡æ¯è¾¾æˆå…±è¯†ã€‚</p><p>Impossibility of Distributed Consensus with One Faulty Processï¼Œ 1983</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="znode-tree">ZNode tree<a class="hash-link" href="#znode-tree" title="Direct link to heading">â€‹</a></h4><p><img alt="ZooKeeper data tree example." src="/assets/images/zook_0201-f348c18600f23040fc76ea4ecbd16b0b.png" width="952" height="855"></p><p>Znodeçš„æ‰€æœ‰ä¿¡æ¯éƒ½è¢«å­˜åœ¨ä¸€æ£µæ ‘é‡Œï¼ŒåŒ…æ‹¬Masterï¼ŒWorkersï¼ŒTaskså’ŒAssignã€‚</p><p>å¦‚æœæœ‰æ•°æ®ç¼ºå¤±ï¼Œå°±è¯´æ˜æœ‰åœ°æ–¹å‡ºé”™äº†ã€‚æ¯”å¦‚Masterè¿™é‡Œçš„å€¼æ˜¯ç©ºï¼Œå°±è¯´æ˜éœ€è¦è¿›è¡ŒLeader electionã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="äº‹ç‰©åŸå­æ€§">äº‹ç‰©åŸå­æ€§<a class="hash-link" href="#äº‹ç‰©åŸå­æ€§" title="Direct link to heading">â€‹</a></h5><p>Zookeeperæœ‰APIå¯ä»¥å¯¹æ•°æ®è¿›è¡Œè¯»å†™ï¼Œä½†è¯»æˆ–è€…å†™æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="polling-vs-notification">Polling vs Notification<a class="hash-link" href="#polling-vs-notification" title="Direct link to heading">â€‹</a></h5><p>Polling:</p><p><img alt="Multiple reads to the same znode./img/foo" src="/assets/images/zook_0202-13e643b8ad36e9e732adb6d0f56baccb.png" width="1475" height="717"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ“ä½œ2æ˜¯ä¸å¿…è¦çš„ã€‚</p><p>Notification:</p><p><img alt="Using notifications to indicate changes to a znode" src="/assets/images/zook_0203-b68ec627cd5555c1daa34ec82c658ffc.png" width="1430" height="653"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="version-number">Version Number<a class="hash-link" href="#version-number" title="Direct link to heading">â€‹</a></h5><p>æ¯ä¸ªZnodeéƒ½æœ‰ä¸€ä¸ªç‰ˆæœ¬å·</p><p><img alt="Using versions to prevent inconsistencies due to concurrent updates" src="/assets/images/zook_0204-ca2ed752621e26578f07df89dfb7addb.png" width="1557" height="685"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="ä¸application-äº¤äº’">ä¸Application äº¤äº’<a class="hash-link" href="#ä¸application-äº¤äº’" title="Direct link to heading">â€‹</a></h4><p><img alt="ZooKeeper Architecture Overview." src="/assets/images/zook_0205-8ffc44a8ecad7e5122d3e4779a25b3e4.png" width="867" height="803"></p><p>Standalone modeï¼šä¸€ä¸ªZookeeper server</p><p>Quorum mode: å¤šä¸ªserversï¼Œstates replicate</p><p>å¤šæ•°serverç¡®è®¤çŠ¶æ€è¢«å¤åˆ¶ï¼Œæ‰èƒ½æˆåŠŸæ›´æ–°çŠ¶æ€ï¼Œé¿å…split-brain</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="leader-election">Leader Election<a class="hash-link" href="#leader-election" title="Direct link to heading">â€‹</a></h4><p>Looking stateï¼ŒFollower state å’Œ Leader stateä¸‰ç§çŠ¶æ€</p><p>å‘ç°Leader æŒ‚æ‰ï¼Œé©¬ä¸Šè¿›å…¥looking stateï¼Œç„¶åäº’ç›¸ç»™æ¯ä¸ªresemble é‡Œçš„serverå‘æ¶ˆæ¯ï¼Œæ˜¯ä¸€ä¸ªtupleåŒ…å«è‡ªå·±çš„serverID(sID)å’Œä¸Šä¸€ä¸ªè¯·æ±‚çš„transaction ID(zxID)ã€‚ç„¶åå¯¹æ¯”ï¼Œé€‰å‡ºæœ€æ–°å¤„ç†è¯·æ±‚çš„å½“é€‰leader</p><p><img alt="Leader election illustration." src="/assets/images/zook_0901-0b72139b0918b4fd1bda227adde8f74b.png" width="1272" height="675"></p><p>ä½†æ˜¯è¿™æ ·åšæ˜¯å»ºç«‹åœ¨é€‰ä¸¾æ—¶ç½‘ç»œæ¡ä»¶å¾ˆå¥½çš„æƒ…å†µä¸‹ã€‚</p><p><img alt="Leader election illustration." src="/assets/images/zook_0902-6d04d36e7bd7de5efc353b8b4114cd66.png" width="1269" height="675"></p><p>å¦‚æœç½‘ç»œæœ‰å»¶è¿Ÿï¼Œå°±ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µã€‚å› æ­¤ï¼Œå¯ä»¥åŠ ä¸Šä¸€ä¸ªè¶…æ—¶ï¼Œè®¾å®šç­‰å¾…çš„æœ€é•¿æ—¶é—´ã€‚Fast Electionå°±è®¾ç½®äº†200ms</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="zab-the-zookeeper-atomic-broadcast-protocol"><em>Zab</em>: the ZooKeeper Atomic Broadcast protocol<a class="hash-link" href="#zab-the-zookeeper-atomic-broadcast-protocol" title="Direct link to heading">â€‹</a></h4><ul><li>é¦–å…ˆï¼ŒLeaderä¼šå‘æ‰€æœ‰Followerå‘é€ä¸€ä¸ªProposal ä¿¡æ¯</li><li>Followerå‘Leader å‘é€ ACK</li><li>Leader å‘Follower å‘é€ Commit</li></ul><p><img alt="Regular message pattern to commit proposals." src="/assets/images/zook_0904-4ffadd2e45da58b58d5f305a2fd774de.png" width="1269" height="669"></p><p>è¿™æ ·åšèƒ½ç¡®ä¿äº‹åŠ¡çš„å¤„ç†é¡ºåºï¼Œå¹¶ä¸”ä¸é—æ¼äº‹åŠ¡ã€‚</p><p>Epochï¼šä»£è¡¨Leaderçš„termï¼Œæ¯æ¬¡leader electionéƒ½ä¼šå¢åŠ epochï¼Œæ¯æ¬¡transactionéƒ½ä¼šåŒ…å«epoch</p><p>DIFFï¼šè½¬æ¢Epochæ—¶ï¼Œå¦‚æœç›¸å·®ä¸å¤šï¼ŒLeaderä¼šå‘é€Followerç¼ºå¤±çš„transactionã€‚</p><p>SNAPï¼šç›¸å·®å¾ˆå¤§ï¼ŒLeaderä¼šå‘é€å…¨é‡çš„snapshot</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="observers">Observers<a class="hash-link" href="#observers" title="Direct link to heading">â€‹</a></h5><p>ä¸å‚ä¸æŠ•ç¥¨ï¼Œä¸å‚ä¸proposal</p><p><img alt="Illustration of the leader server pipeline." src="/assets/images/zook_0907-3fbb513b423536af2d921cd060835337.png" width="1531" height="396"></p><p>Masteråœ¨å¤„ç†å®ŒProposalåï¼Œä¼šåŒæ—¶å¤„ç†Commitä»¥åŠæŒä¹…åŒ–åˆ°æœ¬åœ°</p><p>å›åˆ°Kafkaï¼Œkafkaçš„brokerå°±æ˜¯åœ¨zookeeperä¸­ä»¥<em>/brokers/ids</em>çš„å½¢å¼æ³¨å†Œçš„ã€‚</p><p>ç”±äºephemeral nodeçš„ç‰¹æ€§ï¼Œå½“brokerå¤±è”äº†ï¼Œsessionæ–­å¼€ï¼Œå®ƒçš„èŠ‚ç‚¹å°±ä¼šè¢«zookeeperè‡ªåŠ¨ç§»é™¤ã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="controller">Controller<a class="hash-link" href="#controller" title="Direct link to heading">â€‹</a></h4><p>broker+ partition leader electionï¼Œæ¯ä¸ªclusteråªä¼šåŒæ—¶æœ‰ä¸€ä¸ªcontrollerã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="kraft">KRaft<a class="hash-link" href="#kraft" title="Direct link to heading">â€‹</a></h4><p>2019å¹´å¼€å§‹çš„é¡¹ç›®</p><p>ç°æœ‰é—®é¢˜ï¼š</p><ul><li>MetadataåŒæ­¥å†™å…¥ZooKeeperï¼Œåˆ†å‘ç»™brokerå´æ˜¯å¼‚æ­¥ã€‚å› æ­¤å­˜åœ¨brokerï¼Œcontrollerï¼Œzookeeperä¸‰è€…çŠ¶æ€ä¸ä¸€è‡´çš„æƒ…å†µ</li><li>å½“controlleré‡å¯æ—¶ï¼Œéœ€è¦é‡æ–°ä»zookeeperè¯»å…¨é‡çš„çŠ¶æ€æ•°æ®ï¼Œéå¸¸æ…¢ã€‚</li><li>Ownershipä¸æ˜ç¡®ï¼ŒåŒæ ·çš„æ•°æ®æœ‰äº›æ˜¯controlleræ”¹çš„ï¼Œæœ‰äº›æ˜¯brokeræ”¹çš„ï¼Œæœ‰äº›æ˜¯zookeeperæ”¹çš„</li><li>Zookeeperæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿ</li></ul><p>è§£å†³æ–¹æ³•:</p><p>KRaftï¼Œå°†controlleråˆ†ä¸º active controller å’Œfollower controllersï¼Œactive controllerè´Ÿè´£å¤„ç†brokeräº‹åŠ¡ã€‚</p><p>Controller nodesè‡ªå·±leader electionï¼ŒåŸæœ¬å­˜å‚¨åœ¨zookeeperçš„æ•°æ®å­˜åœ¨ä¸€ä¸ªlogä¸­ã€‚</p><p><a href="https://cwiki.apache.org/confluence/display/KAFKA/KIP-500%3A+Replace+ZooKeeper+with+a+Self-Managed+Metadata+Quorum#KIP500:ReplaceZooKeeperwithaSelfManagedMetadataQuorum-MetadataasanEventLog" target="_blank" rel="noopener noreferrer">KIP-500: Replace ZooKeeper with a Self-Managed Metadata Quorum - Apache Kafka - Apache Software Foundation</a></p><p><a href="https://cwiki.apache.org/confluence/display/KAFKA/KIP-595%3A+A+Raft+Protocol+for+the+Metadata+Quorum" target="_blank" rel="noopener noreferrer">KIP-595: A Raft Protocol for the Metadata Quorum - Apache Kafka - Apache Software Foundation</a></p><p><a href="https://cwiki.apache.org/confluence/display/KAFKA/KIP-631%3A+The+Quorum-based+Kafka+Controller" target="_blank" rel="noopener noreferrer">KIP-631: The Quorum-based Kafka Controller - Apache Kafka - Apache Software Foundation</a></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="partition-replicas">Partition Replicas<a class="hash-link" href="#partition-replicas" title="Direct link to heading">â€‹</a></h4><p>æ¯ä¸ªTopic å¯ä»¥æœ‰å¤šä¸ªPartitionï¼Œè€Œæ¯ä¸ªPartitionå¯ä»¥æœ‰å¤šä¸ªreplicaã€‚</p><p>Replicaä¹Ÿåˆ†ä¸»ä»ï¼Œä¸»è´Ÿè´£å¤„ç†client requestï¼Œä»å¤åˆ¶æ¶ˆæ¯å¹¶ä¸”ä½œä¸ºå¤‡ä»½ã€‚</p><p>KIP-392ä¹‹åï¼Œfollower partitionä¹Ÿå¯ä»¥å¤„ç†client requestã€‚ </p><p><a href="https://cwiki.apache.org/confluence/display/KAFKA/KIP-392%3A+Allow+consumers+to+fetch+from+closest+replica" target="_blank" rel="noopener noreferrer">KIP-392: Allow consumers to fetch from closest replica - Apache Kafka - Apache Software Foundation</a></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="requests">Requests<a class="hash-link" href="#requests" title="Direct link to heading">â€‹</a></h4><p><a href="https://www.confluent.io/blog/apache-kafka-purgatory-hierarchical-timing-wheels/" target="_blank" rel="noopener noreferrer">Apache Kafka, Purgatory, and Hierarchical Timing Wheels | Confluent</a></p><p>Request type (also called API key)</p><p>Request version (so the brokers can handle clients of different versions and respond accordingly)</p><p>Correlation ID: a number that uniquely identifies the request and also appears in the response and in the error logs (the ID is used for troubleshooting)</p><p>Client ID: used to identify the application that sent the request</p><p><a href="https://kafka.apache.org/protocol.html" target="_blank" rel="noopener noreferrer">Apache Kafka</a></p><p>ç”±äºClientå¹¶ä¸çŸ¥é“è¦å‘å“ªä¸ªpartitionå‘æ¶ˆæ¯ï¼Œæ‰€ä»¥éœ€è¦metadata requestï¼Œç„¶åbrokerè¿”å›topicï¼Œpartitionä»¥åŠleaderçš„ä¿¡æ¯ã€‚</p><p><img alt="kdg2 0602" src="/assets/images/kdg2_0602-3351456e97e886ce96f0102eea845e08.png" width="600" height="390"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="produce-request">Produce request<a class="hash-link" href="#produce-request" title="Direct link to heading">â€‹</a></h4><p>Acks=&lt;0,1,all&gt;</p><p>ä¸ç­‰å¾…ï¼Œåªç­‰å¾…leaderï¼Œç­‰å¾…æ‰€æœ‰replica sync</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="fetch-request">Fetch request<a class="hash-link" href="#fetch-request" title="Direct link to heading">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="zero-copy">zero-copy<a class="hash-link" href="#zero-copy" title="Direct link to heading">â€‹</a></h5><p>åŒºåˆ«ï¼š</p><p><img alt="img" src="/assets/images/beb09748d5824fa025c5eb30146ffa34-6c73d346e16ef2546d86d4a278b47a50.png" width="672" height="363"></p><p><img alt="img" src="/assets/images/7f217c5bf9bd4787619b7b4861ca6bda-8234c48a15ca24bfbd7a7ad0edf5124f.png" width="680" height="363"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="boundary">boundary<a class="hash-link" href="#boundary" title="Direct link to heading">â€‹</a></h5><p>Lower boundary: Only return results once you have at least 10K bytes to send me</p><p>Upper boundary: Chunk</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="partition-allocation">Partition Allocation<a class="hash-link" href="#partition-allocation" title="Direct link to heading">â€‹</a></h4><ul><li>åœ¨Brokerä¸­å¹³å‡åˆ†é…</li><li>æ¯ä¸ªPartitionçš„å„ä¸ªreplicaåœ¨ä¸åŒbrokerä¸­</li><li>æœºæŸœæ•°æ®ï¼ˆ0.10.0ç‰ˆæœ¬ä¹‹åæ”¯æŒï¼‰</li></ul><p><img alt="kdg2 0605" src="/assets/images/kdg2_0605-4b007b734117460cbe0e4547deb036c6.png" width="600" height="441"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="file">File<a class="hash-link" href="#file" title="Direct link to heading">â€‹</a></h4><p>åˆ†æ®µï¼Œæ¯”å¦‚1Gæˆ–è€…ä¸€å‘¨çš„æ•°æ®</p><p>åˆ é™¤æ—¶ä¸èƒ½åˆ é™¤active segment</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="indexes">Indexes<a class="hash-link" href="#indexes" title="Direct link to heading">â€‹</a></h5><p>æ¯ä¸ªpartitionéƒ½æœ‰ä¸€ä¸ªindexï¼Œå¯¹offsetå’Œæ–‡ä»¶ä½ç½®ä½œæ˜ å°„</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="compact">Compact<a class="hash-link" href="#compact" title="Direct link to heading">â€‹</a></h5><p><img alt="kdg2 0607" src="/assets/images/kdg2_0607-06a8f0f701e39e7fe377017b54c965d9.png" width="549" height="456"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="producers-retry">Producers Retry<a class="hash-link" href="#producers-retry" title="Direct link to heading">â€‹</a></h5><p>message will be stored at least once, but not exactly once.</p><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é…ç½®enable.idempotenceï¼Œè®©brokerè·³è¿‡é‡å¤çš„æ¶ˆæ¯ã€‚</p><p>Produceréœ€è¦èƒ½å¤Ÿhandle Non-retriable errors</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="consumer">Consumer<a class="hash-link" href="#consumer" title="Direct link to heading">â€‹</a></h5><p>ä»Partition fetchä¸€ä¸ªbatchï¼Œæ£€æŸ¥æœ€åçš„offsetï¼Œç„¶åå‘å‡ºæ–°çš„request ä»æœ€åçš„offsetå¼€å§‹ç”³è¯·batchã€‚</p><p>ç”±äºconsumerå¯èƒ½ä¼šå‡ºé”™ï¼Œæˆ–è€…åœæ­¢ï¼Œéœ€è¦æœ‰ä¸€ç§æ‰‹æ®µæ¥æ¢å¤åˆ°ä¸Šä¸€æ¬¡consumeçš„offsetã€‚è¿™å°±éœ€è¦consumerå»commit offsetã€‚</p><p>å¯¹äºæ¯ä¸€ä¸ªPartitionï¼Œconsumeréƒ½ä¼šå­˜å‚¨å½“å‰çš„ä½ç½®ã€‚å½“consumerç¡®è®¤æ”¶åˆ°å¹¶ä¸”å¤„ç†å®Œmessageåï¼Œæ‰ä¼šå‘kafka commit offsetã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="writing">Writing<a class="hash-link" href="#writing" title="Direct link to heading">â€‹</a></h3><p><img alt="kdg2 0301" src="/assets/images/kdg2_0301-6270ff81e68f0b68296c40adfdf6a474.png" width="600" height="625"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="timingé…ç½®">timingé…ç½®<a class="hash-link" href="#timingé…ç½®" title="Direct link to heading">â€‹</a></h5><p><img alt="kdg2 0302" src="/assets/images/kdg2_0302-b1d904a8bb642c9846a15487f3be3846.png" width="600" height="241"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="maxblockms">max.block.ms<a class="hash-link" href="#maxblockms" title="Direct link to heading">â€‹</a></h5><p>producerè°ƒç”¨send()ä¹‹åï¼Œç”±äºsend bufferæ»¡äº†ï¼Œæˆ–è€…metadataå–ä¸åˆ°ï¼Œè¿™æ—¶è®¾ç½®ä¸€ä¸ªè¶…æ—¶æŠ›å¼‚å¸¸ã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="deliverytimeoutms">delivery.timeout.ms<a class="hash-link" href="#deliverytimeoutms" title="Direct link to heading">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="requesttimeoutms">request.timeout.ms<a class="hash-link" href="#requesttimeoutms" title="Direct link to heading">â€‹</a></h5><p>è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯è¯·æ±‚å‘å‡ºå»äº†ä½†æ˜¯serveræ— åº”ç­”ï¼Œè¶…æ—¶æŠ›å¼‚å¸¸ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="retrybackoffms">retry.backoff.ms<a class="hash-link" href="#retrybackoffms" title="Direct link to heading">â€‹</a></h5><p>é»˜è®¤æ¯éš”100msè¿›è¡Œä¸€æ¬¡retryï¼Œä½†æ˜¯é€šè¿‡è¿™ä¸ªå‚æ•°å¯ä»¥è¿›è¡Œè°ƒæ•´ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="lingerms">linger.ms<a class="hash-link" href="#lingerms" title="Direct link to heading">â€‹</a></h5><p>producerä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹å‘é€batchï¼š</p><ul><li><p>batchå·²ç»å†™æ»¡äº†æ¶ˆæ¯</p></li><li><p>æ¶ˆæ¯æ²¡å†™æ»¡ï¼Œä½†æ˜¯è¾¾åˆ°äº†linger.msè®¾ç½®çš„ç­‰å¾…æ—¶é•¿</p></li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="batchsize">batch.size<a class="hash-link" href="#batchsize" title="Direct link to heading">â€‹</a></h5><p>Batchåœ¨å†…å­˜ä¸­çš„å­—èŠ‚é•¿åº¦</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="maxinflightrequestsperconnection">max.in.flight.requests.per.connection<a class="hash-link" href="#maxinflightrequestsperconnection" title="Direct link to heading">â€‹</a></h5><p>åœ¨æœªæ”¶åˆ°responseçš„æƒ…å†µä¸‹ï¼Œæœ€å¤šå‘å¤šå°‘ä¸ªè¯·æ±‚ã€‚è¿™ä¸ªå‚æ•°å¯ä»¥æ§åˆ¶ååé‡ï¼Œé»˜è®¤æ˜¯5</p><p>in flight requestå¦‚æœå¤§äº1ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½å‡ºç°ç¬¬ä¸€ä¸ªbatchå¤±è´¥ï¼Œç¬¬äºŒä¸ªæˆåŠŸçš„æƒ…å†µã€‚</p><p>å¯¹äºä¸€äº›æ¯”å¦‚é“¶è¡Œç­‰ä¸šåŠ¡ï¼Œè¿™ä¸ªæ˜¯ä¸å¯æ¥å—çš„ã€‚ä½†æ˜¯å°äº2åˆä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="enableidempotencetrue">enable.idempotence=true<a class="hash-link" href="#enableidempotencetrue" title="Direct link to heading">â€‹</a></h5><p>message ordering &lt;= 5æ—¶èƒ½å¤Ÿä¿è¯æ¶ˆæ¯çš„é¡ºåºã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="quotas">Quotas<a class="hash-link" href="#quotas" title="Direct link to heading">â€‹</a></h5><h5 class="anchor anchorWithStickyNavbar_mojV" id="quotaproducerdefault2m">quota.producer.default=2M<a class="hash-link" href="#quotaproducerdefault2m" title="Direct link to heading">â€‹</a></h5><p>è®¾ç½®producer/consumer/requestçš„ rate limit</p><p>ä½†è¿™ä¸ªé€‰é¡¹å¯èƒ½ä¼šå¯¼è‡´æ¶ˆæ¯å›¤ç§¯åœ¨producerçš„ç¼“å†²åŒºï¼Œå¯¼è‡´å­˜å‚¨æº¢å‡º</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="reading">Reading<a class="hash-link" href="#reading" title="Direct link to heading">â€‹</a></h3><p><img alt="kdg2 0401" src="/assets/images/kdg2_0401-3458f79a2c9dde22318fcb1b5872c771.png" width="600" height="414"></p><p>å¦‚æœä¸€ä¸ªConsumer groupé‡Œåªæœ‰ä¸€ä¸ªconsumerï¼Œå®ƒä¼šæ¥æ”¶åˆ°æ‰€æœ‰Partitionçš„æ¶ˆæ¯ã€‚</p><p>å¦‚æœä¸€ä¸ªConsumer groupé‡Œçš„consumeræ•°é‡å¤§äºpartitionæ•°é‡ï¼Œæœ‰çš„consumerå°±æ¥æ”¶ä¸åˆ°æ¶ˆæ¯äº†ã€‚</p><p><img alt="kdg2 0404" src="/assets/images/kdg2_0404-982fdc03ee2e6e5fc4020627e3c42e42.png" width="600" height="492"></p><p>å¦‚æœå­˜åœ¨å¤šä¸ªConsumer groupï¼Œå¤šä¸ªgroupä¹‹é—´æ˜¯äº’ç›¸ç‹¬ç«‹çš„ã€‚</p><p><img alt="kdg2 0405" src="/assets/images/kdg2_0405-d98482b89964f525a4efeac88e165bd5.png" width="600" height="703"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="rebalance">Rebalance<a class="hash-link" href="#rebalance" title="Direct link to heading">â€‹</a></h4><p>å°†partitionçš„ownershipä»ä¸€ä¸ªconsumerè½¬ç§»åˆ°å¦ä¸€ä¸ªconsumerï¼Œç§°ä¸ºrebalance.</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="eager-rebalance">Eager rebalance<a class="hash-link" href="#eager-rebalance" title="Direct link to heading">â€‹</a></h5><p><img alt="kdg2 0406" src="/assets/images/kdg2_0406-d33991e55a8e7587cc1743c9e2fd3a67.png" width="600" height="245"></p><p>æ‰€æœ‰consumeræš‚åœæ¶ˆè´¹æ¶ˆæ¯ï¼Œæ”¾å¼ƒownershipï¼Œé‡æ–°åŠ å…¥consumer groupï¼Œç­‰å¾…brokeré‡æ–°åˆ†é…ownershipã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="cooperative-rebalanceincremental-rebalance">Cooperative rebalance(incremental rebalance)<a class="hash-link" href="#cooperative-rebalanceincremental-rebalance" title="Direct link to heading">â€‹</a></h5><p>Consumer group leaderä¼šé€šçŸ¥å…¶ä»–consumerï¼Œå“ªäº›partitionä¼šè¢«é‡æ–°å®‰æ’ã€‚ownè¿™äº›Partitonçš„consumerä¼šåœæ­¢æ¶ˆè´¹è¿™äº›partitionçš„æ¶ˆæ¯ï¼Œç„¶åconsumer group leaderå°†è¿™äº›partitioné‡æ–°åˆ†é…ç»™ç›®æ ‡consumerã€‚</p><p><img alt="kdg2 0407" src="/assets/images/kdg2_0407-ce045ddddf0153f0facd06a70dc6f53f.png" width="600" height="256"></p><p>é€šè¿‡å‘é€å¿ƒè·³åŒ…æ¥ç¡®è®¤consumeråœ¨çº¿ã€‚</p><p>ç¬¬ä¸€ä¸ªåŠ å…¥Consumer groupçš„æˆä¸ºgroup leaderã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="static-group-membership">Static group membership<a class="hash-link" href="#static-group-membership" title="Direct link to heading">â€‹</a></h5><p>consumerä¹Ÿå¯ä»¥é…ç½®ä¸ºé™æ€çš„æˆå‘˜ï¼Œè¿™æ ·å½“consumeræ–­å¼€è¿æ¥åï¼Œå®ƒçš„partitionä¸ä¼šè¢«rearrangeï¼Œè€Œæ˜¯ç­‰å¾…å®ƒä¸Šçº¿åæ¢å¤æ¶ˆè´¹ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="maxpollintervalms">max.poll.interval.ms<a class="hash-link" href="#maxpollintervalms" title="Direct link to heading">â€‹</a></h5><p>å°½ç®¡kafkaé€šè¿‡background threadå¿ƒè·³åŒ…æ¥ç¡®è®¤consumeræ˜¯å¦åœ¨çº¿ï¼Œä½†æ˜¯åœ¨çº¿å¹¶ä¸ä»£è¡¨å®ƒèƒ½å¤Ÿæ­£å¸¸å¤„ç†æ¶ˆæ¯ã€‚</p><p>å¯ä»¥é€šè¿‡è¿™ä¸ªå€¼æ¥æ§åˆ¶ï¼Œå¦‚æœclientè¶…è¿‡è¿™ä¸ªæ—¶é—´è¿˜æ²¡æœ‰å‘é€ç¬¬äºŒæ¬¡poll()ï¼Œé‚£ä¹ˆè®¤ä¸ºå®ƒçš„çº¿ç¨‹å·²ç»deadäº†ã€‚</p><p>é»˜è®¤æ˜¯5åˆ†é’Ÿ</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="autooffsetreset">auto.offset.reset<a class="hash-link" href="#autooffsetreset" title="Direct link to heading">â€‹</a></h5><p>æœ‰latestå’Œearliestä¸¤ç§ï¼Œæ§åˆ¶æ²¡æœ‰offsetæ—¶æ˜¯è¯»å–æœ€æ–°æ¶ˆæ¯è¿˜æ˜¯å…¨é‡æ¶ˆæ¯ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="partitionassignmentstrategy">partition.assignment.strategy<a class="hash-link" href="#partitionassignmentstrategy" title="Direct link to heading">â€‹</a></h5><p><em>Range</em></p><p>partitioné™¤ä»¥consumer countåï¼Œå¾—åˆ°è¿ç»­çš„ç¼–å·èŒƒå›´ï¼Œåˆ†é…ç»™consumerã€‚</p><p><em>RoundRobin</em></p><p>æŠŠæ‰€æœ‰çš„partition one-by-oneåˆ†é…ç»™consumers</p><p><em>Sticky</em></p><p>æ¯”RoundRobinæ›´åŠ å¹³è¡¡ï¼Œåœ¨Reassignçš„æ—¶å€™å‡å°‘äº†Rebalanceçš„æ¬¡æ•°</p><p><em>Cooperative Sticky</em></p><p>æ”¯æŒCooperative Rebalance</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="offsetsretentionminutes">offsets.retention.minutes<a class="hash-link" href="#offsetsretentionminutes" title="Direct link to heading">â€‹</a></h5><p>Groupé‡Œçš„æ¶ˆæ¯è¢«æ¶ˆè´¹å®Œäº†ï¼Œé»˜è®¤ä¿ç•™7å¤©ï¼Œç„¶åoffsetä¼šæ¸…é›¶ï¼Œconsumer groupä¼šå’Œæ–°åŠ å…¥çš„ä¸€æ ·ã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="offsets">Offsets<a class="hash-link" href="#offsets" title="Direct link to heading">â€‹</a></h4><p><img alt="kdg2 0408" src="/assets/images/kdg2_0408-2fc3ff5c547d978a086f2f994cee04cc.png" width="600" height="257"></p><p>å¦‚ä¸Šå›¾ï¼Œæœ€åçš„æƒ…å†µï¼šå¦‚æœBatchSize=5ï¼Œä¸Šä¸€ä¸ªBatchå¤„ç†å®Œäº†ï¼Œæ”¶åˆ°ä¸‹ä¸€ä¸ªBatchã€‚ä½†æ˜¯Commit Offset=7æ²¡æœ‰å‘å‡ºå»ï¼Œç„¶åå¤„ç†åˆ°10çš„æ—¶å€™consumeræŒ‚äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä¸‹ä¸€ä¸ªæ¥æ›¿çš„consumerä¼šä»2å¼€å§‹å¤„ç†ï¼Œå¯¼è‡´ä»3~10è¿™å‡ ä¸ªéƒ½è¢«é‡å¤å¤„ç†äº†ã€‚</p><p>è§£å†³åŠæ³•å°±æ˜¯manual commit offsetï¼Œè°ƒç”¨APIå¤„ç†å®Œä¸€æ¡æ¶ˆæ¯åå°±commitã€‚</p><p>commitAsyncæ²¡æœ‰retryï¼ŒcommitSyncæœ‰retryã€‚</p><p>å½“ç„¶ï¼Œå¢åŠ Specified commitä¼šå‡å°‘å‡ºé”™æ—¶é‡å¤å¤„ç†çš„æ¶ˆæ¯æ•°é‡ï¼Œä½†ä¹Ÿä¼šé™ä½Throughputã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="atomic-multipartition-writes">atomic multipartition writes<a class="hash-link" href="#atomic-multipartition-writes" title="Direct link to heading">â€‹</a></h4><p><img alt="kdg2 0801" src="/assets/images/kdg2_0801-cfdde2cce5f37db927f4712a4f3c05ad.png" width="600" height="235"></p><p>Consumeï¼ŒProcessï¼ŒProduceä¸‰æ­¥å½¢æˆä¸€ä¸ªåŸå­æ“ä½œï¼Œå°±æ˜¯è®©Produceæ—¶åŒæ—¶æ›´æ–°æ•°æ®å’ŒOffsetï¼Œè¦ä¹ˆéƒ½æ— æ³•æ›´æ–°è¦ä¹ˆéƒ½å¯ä»¥æ›´æ–°ã€‚</p><p><img alt="kdg2 0802" src="/assets/images/kdg2_0802-10207f5fc204b9d2f008c62a420cfb41.png" width="600" height="315"></p><p>Last Stable Offset, or LSO</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="å®‰è£…">å®‰è£…<a class="hash-link" href="#å®‰è£…" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="mac">Mac<a class="hash-link" href="#mac" title="Direct link to heading">â€‹</a></h4><p>å®‰è£…openjdk</p><p><code>brew install openjdk</code></p><p>ç„¶åå¼€å¯zookeeper</p><p><code>zookeeper-server-start /opt/homebrew/Cellar/kafka/3.2.0/libexec/config/zookeeper.properties</code></p><p>å¼€å¯kafka</p><p>Enable JMX</p><p><a href="https://docs.microfocus.com/doc/MP_for_Apache_Kafka/1.10/Kafka/Kafka_JMX" target="_blank" rel="noopener noreferrer">ITOM Practitioner Portal (microfocus.com)</a></p><p><code>env JMX_PORT=&lt;portnumber&gt; kafka-server-start /opt/homebrew/Cellar/kafka/3.2.0/libexec/config/server.properties</code></p><p>åˆ›å»ºtopic</p><p><code>kafka-topics --bootstrap-server localhost:9092 --create --replication-factor 1 --partitions 1 --topic test</code></p><p>è¾“å‡ºï¼š
Created topic test.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">(base) âœ  ~ kafka-topics --bootstrap-server localhost:9092 --describe --topic test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: test TopicId: cqJ9A01WRpOhwcD1sBLKTA PartitionCount: 1   ReplicationFactor: 1    Configs: segment.bytes=1073741824</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Topic: test Partition: 0    Leader: 0   Replicas: 0 Isr: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(base) âœ  ~</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æµ‹è¯•Consumer å’Œ Producer</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">(base) âœ  ~ kafka-console-producer --bootstrap-server localhost:9092 --topic test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;Hello Kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;Bye</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;^C%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(base) âœ  ~ kafka-console-consumer --bootstrap-server localhost:9092 --topic test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">^CProcessed a total of 0 messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(base) âœ  ~ kafka-console-consumer --bootstrap-server localhost:9092 --topic test --from-beginning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bye</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">^CProcessed a total of 2 messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(base) âœ  ~ kafka-console-consumer --bootstrap-server localhost:9092 --topic test --from-beginning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bye</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">^CProcessed a total of 2 messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(base) âœ  ~</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¿™é‡Œå¯ä»¥ç”¨zkcliçœ‹åˆ°ï¼Œkafkaå·²ç»åœ¨æ›´æ–°zookeeperçš„çŠ¶æ€ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[zk: localhost:2181(CONNECTED) 2] ls /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin, brokers, cluster, config, consumers, controller, controller_epoch, feature, isr_change_notification, latest_producer_id_block, log_dir_event_notification, zookeeper]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[zk: localhost:2181(CONNECTED) 3] ls /brokers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ids, seqid, topics]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[zk: localhost:2181(CONNECTED) 4] ls /brokers/topics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[__consumer_offsets, test]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[zk: localhost:2181(CONNECTED) 5] ls /brokers/topics/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[partitions]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[zk: localhost:2181(CONNECTED) 6] ls /brokers/topics/test/partitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[zk: localhost:2181(CONNECTED) 7] ls /brokers/topics/test/partitions/0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[state]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[zk: localhost:2181(CONNECTED) 8] ls /brokers/topics/test/partitions/0/state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[zk: localhost:2181(CONNECTED) 9] ls /brokers/topics/__consumer_offsets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[partitions]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[zk: localhost:2181(CONNECTED) 10] ls /brokers/topics/__consumer_offsets/partitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0, 1, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 2, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 3, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 4, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 5, 6, 7, 8, 9]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æˆ‘ä»¬å¯ä»¥ç”¨cmakå·¥å…·æ¥çœ‹ï¼š</p><p><a href="https://github.com/yahoo/CMAK" target="_blank" rel="noopener noreferrer">https://github.com/yahoo/CMAK</a></p><p>ä¸‹è½½ä¸‹æ¥åï¼Œä¿®æ”¹application.confæ–‡ä»¶</p><p><code>cmak.zkhosts=&quot;0.0.0.0:2181&quot;</code></p><p>ç„¶åå¯åŠ¨ï¼Œæ³¨æ„ä¸è¦ç”¨jdk16ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼ŒåŠ è½½cssä¼šæŠ¥é”™ï¼Œåº”è¯¥æ˜¯ä¸ªbug</p><p><code>bin/cmak -java-home /opt/homebrew/opt/openjdk@11/</code></p><p>ç„¶åè®¿é—®localhost:9000</p><p>æ·»åŠ cluster, zk è®¾ç½®ä¸ºlocalhost:9000</p><p>å¯ä»¥çœ‹åˆ°topicsï¼Œbrokers</p><p>ç‚¹è¿›topics</p><p><img alt="image-20220821104616084" src="/assets/images/image-20220821104616084-2bafbc84af13313c17433cf7c5548d93.png" width="2538" height="1318"></p><p>å¦‚æœenableäº†JMXï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°metricsäº†ã€‚</p><p>æ¯”å¦‚èµ·ä¸€ä¸ªconsole,ä½œä¸ºconsumerï¼Œä¸€ä¸ªä½œä¸ºproducer</p><p><code>âœ  ~ kafka-console-consumer --bootstrap-server localhost:9092 --topic test</code></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">~ kafka-console-producer --bootstrap-server localhost:9092 --topic test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;i&#x27;m fine</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å‘ç°consumeré‚£è¾¹æ”¶åˆ°äº†æ¶ˆæ¯ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">âœ  ~ kafka-console-consumer --bootstrap-server localhost:9092 --topic test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">i&#x27;m fine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ç„¶åå›åˆ°CMAKï¼Œåˆ·æ–°ï¼Œå‘ç°metricsæœ‰å˜åŒ–</p><p><img alt="image-20220821110425179" src="/assets/images/image-20220821110425179-a06ac1f9c1ff900af8d8bfe54ea0af34.png" width="974" height="828"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/big-data/kafka.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/big-data/hadoop"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">hadoop</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/cryptography/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">overview</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#kafkaç®€ä»‹" class="table-of-contents__link toc-highlight">kafkaç®€ä»‹</a></li><li><a href="#zookeeper" class="table-of-contents__link toc-highlight">Zookeeper</a></li><li><a href="#writing" class="table-of-contents__link toc-highlight">Writing</a></li><li><a href="#reading" class="table-of-contents__link toc-highlight">Reading</a></li><li><a href="#å®‰è£…" class="table-of-contents__link toc-highlight">å®‰è£…</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.fb9af459.js"></script>
<script src="/assets/js/main.47f840b1.js"></script>
</body>
</html>